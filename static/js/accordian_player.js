// Generated by CoffeeScript 1.3.3

/*
The accordian player will turn the first child of the given element into a toggle.
All siblings will hide and show based on user clicking on first child
*/


(function() {

  (function(jQuery) {
    var $, methods, settings;
    $ = jQuery;
    settings = {
      toggleAttr: "data-accordian"
    };
    methods = {
      init: function(options) {
        return this.each(function() {
          var $this, hitAccordian, _toggler;
          $.extend(settings, options);
          $this = $(this);
          hitAccordian = $this.attr(settings.toggleAttr) === "false" ? false : true;
          if (hitAccordian === true) {
            methods.makeAccordian($this);
          }
          _toggler = $this.find(">:first-child");
          return $this.on("click", ">:first-child", function() {
            var _parent;
            console.log("foo");
            _parent = $(this).parent();
            if (_parent.hasClass("selected")) {
              _parent.removeClass("selected");
              _toggler.siblings().hide();
              return _toggler.find("p").hide();
            } else {
              _parent.addClass("selected");
              _toggler.siblings().show();
              return _toggler.find("p").show();
            }
          });
        });
      },
      makeAccordian: function(_this) {
        var _toggler;
        _toggler = _this.find(">:first-child");
        console.log(_toggler.html());
        _this.addClass("accordian");
        _toggler.siblings().hide();
        _toggler.find("p").hide();
        return _toggler.append($("<span />").addClass("toggler"));
      }
    };
    return $.fn.accordianPlayer = function(method) {
      if (methods[method]) {
        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
      } else if (typeof method === 'object' || !method) {
        return methods.init.apply(this, arguments);
      } else {
        return $.error('Method ' + method + ' does not exist on jQuery.accordianPlayer');
      }
    };
  })(jQuery);

}).call(this);
